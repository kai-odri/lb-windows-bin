CREATE TABLE Customer(CustomerID INTEGER PRIMARY KEY, Name TEXT, PhoneNumber TEXT, EmailAddress TEXT);
CREATE TABLE Employee(EmployeeID INTEGER PRIMARY KEY, Name TEXT NOT NULL, Team INTEGER, Address TEXT, PhoneNumber TEXT, EmailAddress TEXT,EmployeeType TEXT, EmploymentStatus TEXT, DateStarted TEXT, DateFinished TEXT, HourlyRate REAL, Notes TEXT);
CREATE TABLE ServiceJob(ServJobID INTEGER PRIMARY KEY, SolarCompanyABN INTEGER NOT NULL, JobType TEXT, SiteID INTEGER NOT NULL, DateBooked TEXT, DateCompleted TEXT, Notes TEXT, FOREIGN KEY(SolarCompanyABN) REFERENCES SolarCompany(ABN), FOREIGN KEY(SiteID) REFERENCES Site(SiteID));
CREATE TABLE SolarCompanyPerson(SCompanyPersonID INTEGER PRIMARY KEY, Name TEXT, SolarCompanyABN TEXT NOT NULL, Role TEXT, PhoneNumber TEXT, EmailAddress TEXT, FOREIGN KEY(SolarCompanyABN) REFERENCES SolarCompany(ABN));
CREATE TABLE Invoice(InvoiceNo INTEGER PRIMARY KEY, EWR TEXT, DatePaid TEXT, Amount REAL, InstJobID INTEGER, ServJobID INTEGER, FOREIGN KEY(InstJobID) REFERENCES SolarInstall(InstJobID), FOREIGN KEY(ServJobID) REFERENCES ServiceJob(ServJobID));
CREATE TABLE SiteVisit(SiteVisitID INTEGER PRIMARY KEY, ServJobID INTEGER, InstJobID INTEGER, EmployeeID INTEGER NOT NULL, Date TEXT, TravelTime REAL, WorkTime REAL, RainLostTime REAL, TotalTime REAL, FixupVisit INTEGER, FOREIGN KEY(ServJobID) REFERENCES ServiceJob(ServJobID), FOREIGN KEY(InstJobID) REFERENCES SolarInstall(InstJobID), FOREIGN KEY(EmployeeID) REFERENCES Employee(EmployeeID));
CREATE TABLE JobAssignment( JobAssignmentID INTEGER PRIMARY KEY, InstJobID INTEGER NOT NULL, DCRUN TEXT, Isolators TEXT, CuttingRail TEXT, PanelPrep TEXT, PreppingFeet TEXT, InstallingFeet TEXT, InstallingRail TEXT, FOREIGN KEY(InstJobID) REFERENCES SolarInstall(InstJobID));
CREATE TABLE IF NOT EXISTS "SolarCompany"(ABN TEXT PRIMARY KEY, CompanyName TEXT NOT NULL UNIQUE, Address TEXT, Phone TEXT, Email TEXT, Operating INTEGER);
CREATE TABLE Site(SiteID INTEGER PRIMARY KEY, Address TEXT, CustomerID INTEGER NOT NULL, PropertyPhase INTEGER, DistanceToDepot INTEGER, MetroOrRural TEXT, FOREIGN KEY(CustomerID) REFERENCES Customer(CustomerID));
CREATE TABLE MissingParts(MissPartsID INTEGER PRIMARY KEY, InstJobID INTEGER NOT NULL, Feet INTEGER, Rail INTEGER, Clips INTEGER, Isolators INTEGER, Ends INTEGER, Joiners INTEGER, SupplyGSDDevice INTEGER, CircuitBreaker INTEGER, FOREIGN KEY(InstJobID) REFERENCES SolarInstall(InstJobID));
CREATE TABLE JobVariations(JobVariationsID INTEGER PRIMARY KEY, InstJobID INTEGER NOT NULL, SmartMeter INTEGER, Scissorlift INTEGER, LandscapedPanels INTEGER, TrencherHire INTEGER, LadderHire INTEGER, PanelsRemoves INTEGER, DCOptimizers INTEGER, PanelsDropped INTEGER, ExtraRoofFaces INTEGER, PartialMeterBoardUpgrade INTEGER, FullMeterBoardUpgrade INTEGER, InstallGSDDevice INTEGER, PlyMountingBoardForInverter INTEGER, HotWaterTimerAndContacter INTEGER, SupplyCorrectCircuitBreaker INTEGER, MeteringNeutralLink INTEGER, InstallIsolationLink1Phase INTEGER, InstallIsolationLink3Phase INTEGER, OnePoleEnclosure INTEGER, TwoPoleEnclosure INTEGER, FourPoleEnclosure INTEGER, EightPoleEnclosure INTEGER, LongDCRun INTEGER, LongACRun INTEGER, BatterInstallation INTEGER, SteepRoof INTEGER, SecondInverter INTEGER, BackupCircuit INTEGER, PanelsTilted INTEGER, ExportControlDevice INTEGER, SplitArrayOver2 INTEGER, MainSwitchReplacement INTEGER, New1PoleRCBO INTEGER, MSBUpgradeAndRelo INTEGER, NewCircuitBreaker Integer, FOREIGN KEY(InstJobID) REFERENCES SolarInstall(InstJobID));
CREATE TABLE IF NOT EXISTS "SolarInstall"(InstJobID INTEGER PRIMARY KEY, SiteID INTEGER NOT NULL, SolarCompanyABN TEXT NOT NULL, InverterBrand TEXT, InverterOutput REAL, PanelsBrand TEXT, PanelsSize TEXT, NoOfPanels INTEGER, PanelW INTEGER, NMI TEXT, RoofType TEXT, BuildingHeight INTEGER, StartDate TEXT, FinishDate TEXT, GrossProfit REAL, NetProfit REAL, STCIncome REAL, Notes TEXT, FOREIGN KEY(SolarCompanyABN) REFERENCES SolarCompany(ABN), FOREIGN KEY(SiteID) REFERENCES Site(SiteID));
